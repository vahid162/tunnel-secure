# tunnel-secure

این ریپو یک اسکریپت Wizard برای سخت‌سازی امنیت سرورهایی دارد که از `ssh-tunnel` یا `gre-4` استفاده می‌کنند، با تمرکز روی این‌که تونل شما قطع نشود.

## اسکریپت

- مسیر: `scripts/tunnel-security-wizard.sh`
- نوع اجرا: تعاملی (سوال‌محور)
- مناسب برای: Ubuntu/Debian (به‌خاطر `apt` و `ufw`)

## قابلیت‌ها

- تنظیم امن `sshd_config` با بکاپ خودکار
- فعال‌سازی `fail2ban` برای جلوگیری از Brute-force
- تنظیم `sysctl` سازگار با GRE (برای جلوگیری از اختلال rp_filter)
- تنظیم `ufw` به‌صورت ایمن با درنظر گرفتن:
  - IP مدیریتی شما
  - پورت SSH
  - پورت‌های تونل SSH
  - پروتکل GRE و IP سمت مقابل

## اجرا

```bash
sudo bash scripts/tunnel-security-wizard.sh
```

## نکته مهم

قبل از فعال‌سازی فایروال، حتماً یک دسترسی اضطراری (کنسول پنل/VNC/KVM) داشته باشید.

## بکاپ‌ها

همه بکاپ‌ها در مسیر زیر ذخیره می‌شود:

```bash
/root/tunnel-secure-backups
```
